[gd_scene load_steps=17 format=3 uid="uid://bwwxydcd6n0oa"]

[ext_resource type="Script" uid="uid://bmv2kwqa2b5qu" path="res://Globals/global_signal_bus.gd" id="1_83gf6"]
[ext_resource type="Script" uid="uid://q07i8xg1j363" path="res://Globals/GameStates/in_game_state.gd" id="2_r2ljp"]
[ext_resource type="AudioStream" uid="uid://pjvi81b587y1" path="res://Audio/background_music.ogg" id="3_yry2f"]
[ext_resource type="AudioStream" uid="uid://c1hgj3p4bl4s0" path="res://Audio/ScaryMusic.mp3" id="4_7ddf7"]
[ext_resource type="Script" uid="uid://b0gq5dnfaueci" path="res://Globals/SceneManager.gd" id="5_hv1ua"]
[ext_resource type="PackedScene" uid="uid://sydm4wgfgdwb" path="res://Scenes/Testing/Casino.tscn" id="5_l1uwp"]
[ext_resource type="PackedScene" uid="uid://cofnkihdrskxa" path="res://Scenes/Assets/WheelOfHope/WheelOfHope.tscn" id="7_5th8o"]
[ext_resource type="PackedScene" uid="uid://bcp1e5mn1rk67" path="res://Scenes/CharacterScenes/Enemies/ChaserEnemy/ChaserEnemy.tscn" id="8_7dvjk"]
[ext_resource type="PackedScene" uid="uid://tkbftlb38xp" path="res://Classes/Collectable/Collectable.tscn" id="12_fu36u"]
[ext_resource type="Texture2D" uid="uid://sxxfbe4kp875" path="res://icon.svg" id="13_lwnbm"]
[ext_resource type="PackedScene" uid="uid://bq613sl6t77te" path="res://Scenes/Assets/Slot Machine/SlotMachine.tscn" id="16_7dvjk"]
[ext_resource type="PackedScene" uid="uid://bi2jdyfqbg5bs" path="res://Scenes/CharacterScenes/Villain/villain.tscn" id="17_fy07g"]
[ext_resource type="PackedScene" uid="uid://cwdthf0ljkwut" path="res://Scenes/PlayerGUI/SessionMenu/SessionMenu.tscn" id="18_wgtvb"]

[sub_resource type="AudioStreamInteractive" id="AudioStreamInteractive_iusis"]
clip_count = 2
clip_0/name = &"Background"
clip_0/stream = ExtResource("3_yry2f")
clip_0/auto_advance = 0
clip_1/name = &"Scary"
clip_1/stream = ExtResource("4_7ddf7")
clip_1/auto_advance = 0
_transitions = {
Vector2i(0, 1): {
"fade_beats": 1.0,
"fade_mode": 0,
"from_time": 0,
"to_time": 0
},
Vector2i(1, 0): {
"fade_beats": 1.0,
"fade_mode": 0,
"from_time": 0,
"to_time": 0
}
}

[sub_resource type="BoxShape3D" id="BoxShape3D_fnb83"]
size = Vector3(180.202, 1, 186.079)

[sub_resource type="Environment" id="Environment_y8u7o"]
background_mode = 2
tonemap_mode = 2
glow_enabled = true
fog_enabled = true
fog_mode = 1
fog_light_color = Color(0, 0, 0, 1)
fog_density = 1.0
fog_depth_curve = 0.258816

[node name="Root" type="Node3D"]

[node name="BrainMatter" type="Node" parent="."]

[node name="GlobalSignalBus" type="Node" parent="BrainMatter"]
script = ExtResource("1_83gf6")

[node name="GameStateManager" type="Node" parent="BrainMatter" node_paths=PackedStringArray("DeathTimer", "MusicController", "player", "SpawnPos", "Detector", "TimeCounter")]
script = ExtResource("2_r2ljp")
DeathTimer = NodePath("DeathTimer")
MusicController = NodePath("MusicController")
player = NodePath("../../World/Player")
SpawnPos = NodePath("../../World/PlayerSpawnPos")
Detector = NodePath("../../World/Detector")
TimeCounter = NodePath("TimeCounter")

[node name="MusicController" type="AudioStreamPlayer" parent="BrainMatter/GameStateManager"]
stream = SubResource("AudioStreamInteractive_iusis")

[node name="DeathTimer" type="Timer" parent="BrainMatter/GameStateManager"]
one_shot = true

[node name="TimeCounter" type="Timer" parent="BrainMatter/GameStateManager"]

[node name="SceneManager" type="Node" parent="BrainMatter"]
script = ExtResource("5_hv1ua")

[node name="World" parent="." instance=ExtResource("5_l1uwp")]

[node name="PlayerSpawnPos" type="Marker3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.71364, 0.5, 0)

[node name="EnemySpawnPoints" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.216676, 0.0545971, -0.187712)

[node name="M1" type="Marker3D" parent="World/EnemySpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.9165, 2.72378, -0.249826)

[node name="M2" type="Marker3D" parent="World/EnemySpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.9533, 2.72378, 3.24068)

[node name="M3" type="Marker3D" parent="World/EnemySpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.29667, 2.51346, 9.21587)

[node name="M4" type="Marker3D" parent="World/EnemySpawnPoints"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.3187, 2.72378, 8.20232)

[node name="WheelOfHope" parent="World" node_paths=PackedStringArray("EnemySpawnPoints") instance=ExtResource("7_5th8o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.216676, 0.0545971, -0.187712)
EnemySpawnPoints = NodePath("../EnemySpawnPoints")
Chaser = ExtResource("8_7dvjk")

[node name="ArialUI" parent="World/WheelOfHope" index="1"]
transform = Transform3D(0.882309, 0, 0, 0, 0.882309, 0, 0, 0, 0.882309, 0, 1.39993, 0)

[node name="CollisionShape3D" parent="World/WheelOfHope/BufferZone" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0360193, 0.82915, 0)

[node name="Villain" parent="World" instance=ExtResource("17_fy07g")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.624015, 1.42076, 4.13952)

[node name="Detector" type="Area3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -4.17399, 0.272499)
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/Detector"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.91357, 0, -12.9472)
shape = SubResource("BoxShape3D_fnb83")

[node name="Item1" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24.2158, 1.3902, -44.3312)

[node name="Collectable" parent="World/Item1" node_paths=PackedStringArray("Parent") instance=ExtResource("12_fu36u")]
collision_mask = 3
Parent = NodePath("..")

[node name="Sprite3D" type="Sprite3D" parent="World/Item1"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 0, 0)
modulate = Color(1, 0.55373, 0.354052, 1)
texture = ExtResource("13_lwnbm")

[node name="Item2" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.7769, 1.44405, -44.7095)

[node name="Collectable" parent="World/Item2" node_paths=PackedStringArray("Parent") instance=ExtResource("12_fu36u")]
Parent = NodePath("..")

[node name="Sprite3D" type="Sprite3D" parent="World/Item2"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 0, 0)
modulate = Color(1, 0.55373, 0.354052, 1)
texture = ExtResource("13_lwnbm")

[node name="Item3" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -39.261, 1.44405, -44.1518)

[node name="Collectable" parent="World/Item3" node_paths=PackedStringArray("Parent") instance=ExtResource("12_fu36u")]
Parent = NodePath("..")

[node name="Sprite3D" type="Sprite3D" parent="World/Item3"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 0, 0)
modulate = Color(1, 0.55373, 0.354052, 1)
texture = ExtResource("13_lwnbm")

[node name="Item4" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.4078, 12.4092, 57.9145)

[node name="Collectable" parent="World/Item4" node_paths=PackedStringArray("Parent") instance=ExtResource("12_fu36u")]
Parent = NodePath("..")

[node name="Sprite3D" type="Sprite3D" parent="World/Item4"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 0, 0)
modulate = Color(1, 0.55373, 0.354052, 1)
texture = ExtResource("13_lwnbm")

[node name="Lighting" type="Node3D" parent="."]
metadata/_edit_lock_ = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lighting"]
environment = SubResource("Environment_y8u7o")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(1, 6.86168e-08, -3.19966e-08, -3.78551e-08, 0.819152, 0.573576, 6.5567e-08, -0.573576, 0.819152, 0, 0, 0)
shadow_enabled = true

[node name="SessionMenu" parent="." node_paths=PackedStringArray("World") instance=ExtResource("18_wgtvb")]
World = NodePath("../World")
InitialGameTime = 60

[node name="SlotMachines" parent="." instance=ExtResource("16_7dvjk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20.2859, 0.100002, 0.482087)

[node name="Node" type="Node" parent="."]

[editable path="World/WheelOfHope"]
